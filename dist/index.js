!function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){var r=self.crypto||self.msCrypto;e.exports=function(e){e=e||21;for(var t="",n=r.getRandomValues(new Uint8Array(e));e--;)t+="QLUint8ARdomValuesObj0h6345-79BCrypgJzHKTNYDSMkXPZ_FfG1WcqvwxEI2"[63&n[e]];return t}},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){var t="function"==typeof Map?new Map:void 0;return(s=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return c(e,arguments,f(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,e)})(e)}function c(e,t,n){return(c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&l(o,n.prototype),o}).apply(null,arguments)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,f(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,o=[{key:"create",value:function(e,t){var n=e;return n.sourceObjects=[],n.extData=t,n}}],(r=null)&&a(n.prototype,r),o&&a(n,o),t}(s(MouseEvent));function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.style={strokeWeight:2,fillColor:"transparent",strokeColor:"blue"},this.hoverStyle={strokeWeight:2,fillColor:"transparent",strokeColor:"blue"},this.shape="shape",this.nanoid=o()(),this.visible=!0,this.mouseOver=!1,this.extData={}}var t,n,r;return t=e,(n=[{key:"setLayer",value:function(e){this.layer=e,this.view=e.getMapView()}},{key:"on",value:function(e,t){this.view.on(e,"shape",this,t)}},{key:"off",value:function(e){this.view.off(e,"shape",this)}}])&&h(t.prototype,n),r&&h(t,r),e}();function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=b(this,d(t).call(this))).path=[],r.containerPath=[],r.h3Index="",r.shape="polygon",r.path=e,r.style=Object.assign({},r.style,n),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e),t}(y);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var M=window.AMap,P=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.h3HexagonStyle={fillColor:"rgba(0,44,222,.3)",strokeWeight:0,strokeColor:"rgba(0,44,222,0)"},this.nanoid=o()(),this.ready=0,this.readyPromise=null,this.layersMap=new Map,this.layers=[],this.renderFlag=!1,this.canvasShapesMap=new Map,this.canvasEvent=null,this.mapShapesMap=new Map,this.marksList=[],this.mouseTool=null,this.onDrawClose=null,this.shapeEditor=null,this.editingMapShape=null,this.eventListenerList=[],this.mouseDown=!1,this.mouseDownTime=null,this.mapEventListeners={},this.extraData={}}var t,n,r;return t=e,(n=[{key:"on",value:function(e,t,n,r){if(!this.eventListenerList.find((function(t){return t.type===e&&t.nanoid===n.nanoid}))){var o={type:e,level:t,source:n,nanoid:n.nanoid,handler:r};this.eventListenerList.push(o),"map"===t&&(this.mapEventListeners[e]=o)}}},{key:"off",value:function(e,t,n){var r=this.eventListenerList.findIndex((function(t){return t.type===e&&t.nanoid===n.nanoid}));r>-1&&this.eventListenerList.splice(r,1),"map"===t&&delete this.mapEventListeners[e]}},{key:"initMap",value:function(e,t){var n,r=this,o=arguments;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:["AMap.MouseTool"],this.map=new M.Map(e,t),i.abrupt("return",new Promise((function(e,t){r.readyPromise={resolve:e,reject:t},r.map.plugin(n,(function(){r.mouseTool=new M.MouseTool(r.map),r.mouseTool.on("draw",(function(e){e.type;var t=e.obj,n=r.addPolygonFromMapPolygon(t);r.map.remove(t),r.onDrawClose&&r.onDrawClose(n),r.mouseTool.close()}));var t=document.createElement("canvas"),n=new M.CustomLayer(t,{alwaysRender:!0,map:r.map,zIndex:100});n.render=function(e){var n=r.map.getSize(),o=n.getWidth(),i=n.getHeight(),a=M.Browser.retina;a&&(o*=2,i*=2),t.width=o,t.height=i,t.style.width=o+"px",t.style.height=i+"px",e||(e={}),e.ctx=t.getContext("2d"),e.retina=a,r.layers.forEach((function(t){t.visible&&t.render(e)}))},["click","dblclick","mousemove"].forEach((function(e){t.addEventListener(e,(function(t){var o=Date.now()-r.mouseDownTime;if(!("click"===e&&o>500)&&!r.mouseDown&&r.eventListenerList.find((function(t){return t.type===e}))){var i=p.create(t),a={event:i};n.render(a),r.mapEventListeners[e]&&r.mapEventListeners[e].handler(i)}}))})),t.addEventListener("mousedown",(function(e){r.mouseDownTime=Date.now(),r.mouseDown=!0})),t.addEventListener("mouseup",(function(e){r.mouseDown=!1})),r.customCanvasLayer=n,e(),r.ready=1}))})));case 3:case"end":return i.stop()}}),null,this)}},{key:"render",value:function(){var e=this;this.renderFlag=!0,setTimeout((function(){e.renderFlag&&(e.renderFlag=!1,e.customCanvasLayer.render())}))}},{key:"setMap",value:function(e){this.map=e}},{key:"setZoomAndCenter",value:function(e,t){this.map.setZoomAndCenter(e,t)}},{key:"setCenter",value:function(e){this.map.setCenter(e)}},{key:"addControl",value:function(e,t){this.map.addControl(new M[e](t))}},{key:"addMarker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new M.Marker(S({map:this.map},e));return t.nanoid=o()(),this.mapShapesMap.set(t.nanoid,t),t.nanoid}},{key:"addMapPolygon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={fillColor:"rgba(0,44,222,0)",strokeWeight:2,strokeColor:"rgba(0,44,222,.5)"};t=Object.assign({},n,t);var r=new M.Polygon(S({path:e},t));return r.nanoid=o()(),this.mapShapesMap.set(r.nanoid,r),this.map.add(r),r}},{key:"removeMapItem",value:function(e){var t=this.mapShapesMap.get(e);t&&(this.map.remove(t),this.mapShapesMap.delete(e))}},{key:"addPolygon",value:function(e){return this.canvasShapesMap.set(e.nanoid,e),this.renderShapes(),e}},{key:"addPolygonFromMapPolygon",value:function(e){var t=e.getOptions(),n={fillColor:t.fillColor,strokeColor:t.strokeColor,strokeWeight:t.strokeWeight};return this.addPolygon(new g(e.getPath().map((function(e){return[e.lng,e.lat]})),n))}},{key:"addCircle",value:function(e){return this.canvasShapesMap.set(e.nanoid,e),this.renderShapes(),e}},{key:"removeShapes",value:function(e){var t=this;e.forEach((function(e){return t.canvasShapesMap.delete(e)})),this.renderShapes()}},{key:"hideShapes",value:function(e){this.setShapeVisible(e.map((function(e){return{id:e,visible:!1}})))}},{key:"showShapes",value:function(e){this.setShapeVisible(e.map((function(e){return{id:e,visible:!0}})))}},{key:"setShapeVisible",value:function(e){var t=this;e.forEach((function(e){var n=t.canvasShapesMap.get(e.id);n&&(n.visible=e.visible)})),this.renderShapes()}},{key:"renderShapes",value:function(){var e=this;setTimeout((function(){e.layers.forEach((function(e){e.render()}))}),0)}},{key:"setShapeStyle",value:function(e,t){var n=this.canvasShapesMap.get(e);n&&(n.style=Object.assign(n.style,t),this.renderShapes())}},{key:"clearShapes",value:function(){this.canvasShapesMap.clear(),this.mapShapesMap.clear(),this.renderShapes()}},{key:"setMarks",value:function(e){var t=this;this.marksList.forEach((function(e){t.canvasShapesMap.delete(e.nanoid)})),this.marksList=e,e.forEach((function(e){t.canvasShapesMap.set(e.nanoid,e)})),this.renderShapes()}},{key:"drawPolygon",value:function(e){this.mouseTool.polygon(e)}},{key:"editPolygon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.editingMapShape){var n=this.canvasShapesMap.get(e);if(n){this.hideShapes([e]),n=n;var r=new M.Polygon(S({path:n.path.map((function(e){return[e[0],e[1]]}))},n.style));r.nanoid=e,this.editingMapShape=r,this.map.add(r),this.shapeEditor=new M.PolyEditor(this.map,r),this.shapeEditor.open(),t&&(t({id:e,area:r.getArea()}),this.shapeEditor.on("adjust",(function(){t({id:e,area:r.getArea()})})))}}}},{key:"removeEditingShape",value:function(){this.editingMapShape&&(this.shapeEditor.close(),this.shapeEditor=null,this.showShapes([this.editingMapShape.nanoid]),this.map.remove(this.editingMapShape),this.editingMapShape=null)}},{key:"closeEditShape",value:function(){if(this.editingMapShape){var e=this.canvasShapesMap.get(this.editingMapShape.nanoid),t={id:this.editingMapShape.nanoid,area:this.editingMapShape.getArea(),path:this.editingMapShape.getPath().map((function(e){return[e.lng,e.lat]}))};return e.path=t.path,this.removeEditingShape(),t}return null}},{key:"cancelEditShape",value:function(){this.removeEditingShape()}},{key:"closeDrawPolygon",value:function(){this.mouseTool.close(!0)}}])&&k(t.prototype,n),r&&k(t,r),e}(),j=new P;function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var L=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=E(this,C(t).call(this))).shape="circle",o.center=e,o.radius=n,o.style=Object.assign({},o.style,r),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,e),t}(y);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var W=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=D(this,R(t).call(this))).path=[],r.containerPath=[],r.shape="line",r.path=e,r.style=Object.assign({},r.style,n),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,e),t}(y);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var V=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=F(this,X(t).call(this))).shape="mark",r.location=e,r.style=Object.assign({},r.style,n),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,e),t}(y);function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var z=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.shapes=[],this.shapesMap=new Map,this.ids=[],this.json="",this.shapeType="shape",this.name="",this.nanoid=o()(),this.extData={},this.style={strokeWeight:2,fillColor:"transparent",strokeColor:"blue"},this._visible=!0,this.mouseOver=!1,this.view=t,this.view.layersMap.set(this.nanoid,this),this.view.layers.push(this)}var t,n,r;return t=e,(n=[{key:"getMapView",value:function(){return this.view}},{key:"on",value:function(e,t){this.view.on(e,"layer",this,t)}},{key:"off",value:function(e){this.view.off(e,"layer",this)}},{key:"hide",value:function(){this._visible=!1,this.view.render()}},{key:"show",value:function(){this._visible=!0,this.view.render()}},{key:"clear",value:function(){this.shapesMap.clear(),this.shapes.splice(0),this.view.render()}},{key:"addShape",value:function(e,t){this.shapes.push(e),this.shapesMap.set(e.nanoid,e),this.view.render()}},{key:"removeShape",value:function(e){var t,n;"string"==typeof e?(n=e,t=this.shapesMap.get(n)):e instanceof y&&(t=e,n=e.nanoid),t&&(this.shapesMap.delete(n),this.shapes.splice(this.shapes.indexOf(t),1)),this.view.render()}},{key:"render",value:function(e){var t=this,n=null,r=null,o=null;this.CustomRender(e,(function(i){var a=e.ctx,u=e.event,s=(e.retina,u.type,!0),c=!1,l=void 0;try{for(var f,p=t.view.eventListenerList[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var h=f.value;"map"===h.level&&(o=h),"shape"===h.level&&h.nanoid===i.nanoid&&h.type===u.type&&(n=h),"layer"===h.level&&h.nanoid===t.nanoid&&h.type===u.type&&(r=h)}}catch(e){c=!0,l=e}finally{try{s||null==p.return||p.return()}finally{if(c)throw l}}if(n||r||o){var y=u.x,v=u.y;if(a.isPointInPath(y,v)||a.isPointInStroke(y,v)){if(n){var b=n.handler;setTimeout((function(){b(u)}),0),n=null}if(r){var d=r.handler;setTimeout((function(){d(u)}),0),r=null}o&&(u.sourceObjects.push(i),u.sourceObjects.push(t))}}}))}},{key:"data",value:function(e){var t=this;this.shapesMap.clear(),this.shapes.splice(0),e.forEach((function(e){var n=t.parseData(e);n.extData=e.extra,t.shapesMap.set(n.nanoid,n),t.shapes.push(n)})),this.view.render()}},{key:"visible",get:function(){return this._visible}},{key:"map",get:function(){return this.view?this.view.map:null}}])&&U(t.prototype,n),r&&U(t,r),e}();function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){return!t||"object"!==B(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var N=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=H(this,Z(t).call(this,e))).shapes=[],n.shapesMap=new Map,n.shapeType="polygon",n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,e),n=t,(r=[{key:"CustomRender",value:function(e,t){var n=this,r=e.ctx,o=e.event;e.retina,this.shapesMap.forEach((function(e){var i=e.style;r.fillStyle=i.fillColor,r.strokeStyle=i.strokeColor,r.lineWidth=i.strokeWeight,r.beginPath();var a=e.path;e.containerPath.splice(0);for(var u=0;u<a.length;u++){var s=a[u],c=n.map.lngLatToContainer(s);e.containerPath.push([c.getX(),c.getY()]),r.lineTo(c.getX(),c.getY())}r.closePath(),o&&t(e),r.stroke(),r.fill()}))}},{key:"parseData",value:function(e){var t=e.config,n=e.style,r=new g(t,n);return r.setLayer(this),r}}])&&G(n.prototype,r),o&&G(n,o),t}(z);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var te=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Q(this,$(t).call(this,e))).shapes=[],n.shapesMap=new Map,n.shapeType="circle",n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(t,e),n=t,(r=[{key:"CustomRender",value:function(e,t){var n=this,r=e.ctx,o=(e.retina,e.event);this.shapesMap.forEach((function(e){var i=e.style;r.fillStyle=i.fillColor,r.strokeStyle=i.strokeColor,r.lineWidth=i.strokeWeight,r.beginPath(),e=e;var a=n.map.lngLatToContainer(e.center),u=e.center,s=a,c=e.center.map((function(e){return e}));c[1]>=89?c[1]-=1:c[1]+=1;var l=n.map.lngLatToContainer(c),f=AMap.GeometryUtil.distance(u,c),p=Math.sqrt(Math.pow(s.getX()-l.getX(),2)+Math.pow(s.getY()-l.getY(),2))/f,h=e.radius*p;r.arc(a.getX(),a.getY(),h,0,2*Math.PI),r.closePath(),o&&t(e),r.stroke(),r.fill()}))}},{key:"parseData",value:function(e){var t=e.config,n=e.style,r=t.center,o=t.radius,i=new L(r,o,n);return i.setLayer(this),i}}])&&K(n.prototype,r),o&&K(n,o),t}(z);function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ue=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=oe(this,ie(t).call(this,e))).shapes=[],n.shapesMap=new Map,n.shapeType="line",n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(t,e),n=t,(r=[{key:"CustomRender",value:function(e,t){var n=this,r=e.ctx,o=(e.retina,e.event);this.shapesMap.forEach((function(e){var i=e.style;r.fillStyle=i.fillColor,r.strokeStyle=i.strokeColor,r.lineWidth=i.strokeWeight,r.beginPath();var a=e.path;e.containerPath.splice(0);for(var u=0;u<a.length;u++){var s=a[u],c=n.map.lngLatToContainer(new AMap.LngLat(s[0],s[1]));e.containerPath.push([c.getX(),c.getY()]),r.lineTo(c.getX(),c.getY())}o&&t(e),r.stroke()}))}},{key:"parseData",value:function(e){var t=e.config,n=e.style,r=new W(t,n);return r.setLayer(this),r}}])&&re(n.prototype,r),o&&re(n,o),t}(z);function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return!t||"object"!==se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var he=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=le(this,fe(t).call(this,e))).shapes=[],n.shapesMap=new Map,n.shapeType="mark",n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(t,e),n=t,(r=[{key:"CustomRender",value:function(e,t){var n=this,r=e.ctx,o=(e.retina,e.event);this.shapesMap.forEach((function(e){var i=e.style;r.fillStyle=i.strokeColor,r.strokeStyle=i.strokeColor,r.lineWidth=i.strokeWeight,r.beginPath(),e=e;var a=n.map.lngLatToContainer(new AMap.LngLat(e.location[0],e.location[1])),u=e.style.strokeWeight;r.arc(a.getX(),a.getY(),u,0,2*Math.PI),r.closePath(),o&&t(e),r.stroke(),r.fill()}))}},{key:"parseData",value:function(e){var t=e.config,n=e.style,r=new V(t,n);return r.setLayer(this),r}}])&&ce(n.prototype,r),o&&ce(n,o),t}(z),ye=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 4===e.length&&(e="#"+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)+e.charAt(3)+e.charAt(3)),"rgba(".concat(parseInt(e.substr(1,2),16),",").concat(parseInt(e.substr(3,2),16),",").concat(parseInt(e.substr(5,2),16),",").concat(t,")")},ve=function(e){var t=e.substring(e.indexOf("(")+1,e.length-1).split(","),n=function(e){return Number(e).toString(16).padStart(2,"0")};return"#".concat(n(t[0])).concat(n(t[1])).concat(n(t[2]))},be={calcColorLevel:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"linear",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.E;return"linear"===r?e/t:"log10"===r?(n=e/t*9+1,Math.log10(n)):"log2"===r?(n=e/t+1,Math.log2(n)):"ln"===r?(n=e/t*(Math.E-1)+1,Math.log(n)):"logx"===r?(n=e/t*(o-1)+1,Math.log(n)/Math.log(o)):void 0},generateColor:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=199;if(t<=1)return"rgba(".concat(Math.round(Math.random()*r),",").concat(Math.round(Math.random()*r),",").concat(Math.round(Math.random()*r),", ").concat(n,")");for(var o=[],i=1;i<t;i++)o.push(e());return o},hex2rgb:ye,rgb2hex:ve,toRGBA:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 0===e.indexOf("#")?ye(e,t):0===e.indexOf("rgb")?ye(ve(e),t):void 0}};n.d(t,"MapView",(function(){return P})),n.d(t,"CanvasShape",(function(){return y})),n.d(t,"CanvasCircle",(function(){return L})),n.d(t,"CanvasLine",(function(){return W})),n.d(t,"CanvasMark",(function(){return V})),n.d(t,"CanvasPolygon",(function(){return g})),n.d(t,"Layer",(function(){return z})),n.d(t,"CircleLayer",(function(){return te})),n.d(t,"LineLayer",(function(){return ue})),n.d(t,"MarkLayer",(function(){return he})),n.d(t,"PolygonLayer",(function(){return N})),n.d(t,"colorUtils",(function(){return be}));t.default=j}]));